---
title: 데이터 타입과 메모리 참조 방식
description: 자바스크립트의 데이터 타입과 메모리 참조 과정을 깊이 알아봅니다.
thumbnail:
tags: ['JavaScript']
createdAt: 2023-01-31T11:42:09.172Z
---

> ## TL;DR
>
> - **데이터 타입 분류**: 자바스크립트 데이터 타입은 기본형과 참조형으로 나뉩니다. 기본형 타입은 값 자체를 저장하고, 참조형 타입은 메모리 주소를 저장합니다.
> - **메모리 참조 방법**: 기본형 타입은 메모리에 하나의 값을 직접 저장하며, 참조형 타입은 메모리 주소를 저장하여 데이터에 접근합니다. 참조형 타입의 변수 복사는 메모리 주소를 복사하기 때문에 원본 값이 함께 변경될 수 있습니다.
> - **주소값 저장의 장단점**: 메모리에 주소값을 저장하면 데이터 할당이 느려지지만, 비교 연산이 빠르고 메모리 낭비가 줄어듭니다. 반면, 값을 직접 저장하면 데이터 할당이 빠르지만, 비교 연산이 느려지고 메모리 낭비가 큽니다.

## 데이터 타입의 분류

- **기본형 타입(Primitive Type)**

  - Number
  - String
  - Boolean
  - Null
  - Undefined
  - Symbol

- **참조형 타입(Reference Type)**

  - Array
  - Function
  - RegExp
  - Set/WeakSet
  - Map/WeakMap

## 메모리 참조 방법

### 기본형 타입

![그림1. 기본형 타입의 메모리 참조 방법](/assets/contents/js-memory-reference/1.png)

1. 임의의 주소 1001번에 `식별자 a`를 지정합니다.
2. 3001번에 `문자열 Dog`를 저장하고, `식별자 a`를 검색해 값을 3001번으로 지정합니다.
3. 3003번에 `문자열 Cat`을 저장하고, `식별자 a`를 검색해 값을 3001번에서 3003번으로 변경합니다.
4. 참조 카운트가 0이 된 3001번은 [GC(Garbage Collection)](https://developer.mozilla.org/en-US/docs/Glossary/Garbage_collection)에 의해 초기화됩니다.

### 참조형 타입

![그림2. 참조형 타입의 메모리 참조 방법 - 1](/assets/contents/js-memory-reference/2.png)

1. 임의의 주소 1001번에 `식별자 obj`를 지정합니다.
2. 저장할 데이터가 많기 때문에 5001번부터 어느 정도의 공간을 확보해두고, 그 값을 주소 3000번에 저장합니다.
3. 5001번에 `식별자 a`를 지정하고, 3001번에 10을 저장한 다음 5001번의 값을 3001번으로 지정합니다.
4. 5002번에 `식별자 b`를 지정하고, 3002번에 `문자열 Leo`를 저장한 다음 5002번의 값을 3002번으로 지정합니다.

![그림3. 참조형 타입의 메모리 참조 방법 - 2](/assets/contents/js-memory-reference/3.png)

5. 3003번에 20을 저장합니다.
6. `식별자 obj`를 검색해 찾은 다음, 그 값인 3000번을 참조해 들어가 5001번까지 참조합니다.
7. `식별자 a`를 5001번부터 검색해 찾아 그 값을 3001번에서 3003번으로 변경합니다.
8. 3001번은 참조 카운트가 0이 되어 GC(Garbage Collection)에 의해 초기화됩니다.

### 메모리에 값이 아닌 주소값을 저장하는 이유

![그림4. 메모리에 주소를 저장](/assets/contents/js-memory-reference/4.png)

![그림5. 메모리에 직접 값을 저장](/assets/contents/js-memory-reference/5.png)

자바스크립트는 위의 그림처럼 메모리에 주소값을 저장하기 때문에, **기본형 타입은 메모리상에 오직 하나만 존재한다는 특징이 있습니다. 하지만 이는 데이터를 저장할 때마다 메모리상에 동일한 데이터의 존재 여부를 확인해야 한다는 의미이기도 합니다.** 그래서 이런 방법이 최선이 아니라고 생각할 수 있는데, 아래의 예시로 살펴보겠습니다.

![그림6. 용량이 무지막지하게 큰 문자열을 비교해야한다면?](/assets/contents/js-memory-reference/6.png)

메모리에 직접 값을 저장할 경우, 할당 시에는 동일한 데이터를 찾아볼 필요가 없으므로 빠르게 처리됩니다. 하지만 비교 연산 시에는 큰 비용이 발생하게 됩니다. 비교할 대상의 값이 커지면 커질수록 비용은 순식간에 불어날 것입니다.

반면, 메모리에 주소값을 저장하면 데이터 할당 시에 동일한 데이터를 찾아봐야 하므로 시간이 걸리지만, 비교할 때는 주소값만 서로 비교하면 되기 때문에 비용이 들지 않습니다. 또한, 메모리에 동일한 데이터가 하나만 존재하니 메모리 낭비도 적습니다.

|             | 메모리에 값을 직접 저장 | 메모리에 주소값을 저장 |
| ----------- | ----------------------- | ---------------------- |
| 데이터 할당 | 빠르다(🐇)              | 느리다(🐢)             |
| 비교 연산   | 느리다(🐢)              | 빠르다(🐇)             |
| 메모리 낭비 | 크다                    | 적다                   |

### 참조형 타입을 복사할 때 주의해야 하는 점

**자바스크립트에서는 참조형 타입의 변수를 복사하는 경우, 복사한 참조형 타입의 프로퍼티를 변경하면 원본의 값이 바뀝니다.** 이게 무슨 의미인지 아래의 예시를 통해 확인해보겠습니다.

![그림7. 기본형 타입과 참조형 타입의 복사 - 1](/assets/contents/js-memory-reference/7.png)

위의 그림을 보면 `b`가 기본형 타입인 `a`를, `obj2`가 참조형 타입인 `obj1`을 복사하고 있습니다.

![그림8. 기본형 타입과 참조형 타입의 복사 - 2](/assets/contents/js-memory-reference/8.png)

이때, 복사한 `a`의 값과 `obj2`의 프로퍼티를 변경해보면 기본형 타입의 경우에는 값이 변경됨에 따라 값이 함께 바뀝니다. 하지만 참조형 타입의 경우에는 기본형 타입보다 한 단계를 더 거쳐서 참조하기 때문에 값이 변하지 않습니다. 이 때문에 분명 복사된 `obj2`의 프로퍼티를 변경했는데, 원본인 `obj1`의 프로퍼티 또한 변경된 것입니다. 이 점을 항상 숙지하고 주의하면 좋을 것 같습니다.

## 참조

- https://bit.ly/3L1uo8d
